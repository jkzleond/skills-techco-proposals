# ASCII 图规范

## 目录

- [核心规范](#核心规范)
- [支持的图形类型](#支持的图形类型)
- [正确/错误示例](#正确错误示例)
- [各类图形示例](#各类图形示例)

---

## 核心规范

**⚠️⚠️⚠️ 每一个 ASCII 图都必须标注类型 ⚠️⚠️⚠️**

### 必须遵守的规则

1. **使用代码块格式**：所有 ASCII 图必须用 ` ``` ` 包围
2. **标注类型**：必须标注 `ascii:类型`（如 ` ```ascii:architecture ` `）
3. **使用 Unicode 框线字符**：使用 `┌─│└┘┐┬┼┴├┤` 等字符

### 为什么必须标注类型？

1. ✅ **保持等宽字体** - 避免 Markdown 渲染时格式错乱
2. ✅ **智能转换 SVG** - converting-markdown skill 根据类型选择最优转换策略
3. ✅ **精准识别** - 不会把普通文本中的框线字符误认为 ASCII 图
4. ✅ **版本控制友好** - git diff 更清晰

---

## 支持的图形类型

所有 ASCII 图必须从以下 5 种类型中选择最合适的：

| 类型 | 标注 | 适用场景 | 输出格式 |
|------|------|---------|---------|
| 架构图 | `ascii:architecture` | 系统架构、模块关系 | SVG |
| 流程图 | `ascii:flowchart` | 业务流程、操作步骤 | SVG |
| UI 界面 | `ascii:ui` | 界面布局、组件设计 | **HTML/CSS** |
| 时间线 | `ascii:timeline` | 项目进度、甘特图 | SVG |
| 通用图 | `ascii:diagram` | 其他示意图 | SVG |

---

## 正确/错误示例

### ❌ 错误示例

````markdown
```
┌─────────────────┐
│   用户界面       │
└─────────────────┘
```
````

**问题**：没有标注类型，converting-markdown skill 无法识别

### ✅ 正确示例

````markdown
```ascii:ui
┌─────────────────┐
│   用户界面       │
└─────────────────┘
```
````

---

## 各类图形示例

### 1. 系统架构图 (architecture)

用于展示系统结构、模块关系、数据流向。

**示例 1：简单架构**

````markdown
```ascii:architecture
┌─────────────────┐
│   现有系统       │
│                 │
└─────────────────┘
    ↓ 只读访问
┌─────────────────┐
│   新增系统       │
│                 │
└─────────────────┘
```
````

**示例 2：分层架构**

````markdown
```ascii:architecture
┌─────────────────────────────────────┐
│          用户端（会员/管理员）         │
└─────────────────────────────────────┘
                  ↓
┌─────────────────────────────────────┐
│            Web 应用层                │
│  ┌─────────┐  ┌─────────┐           │
│  │ 会员端  │  │ 管理端  │           │
│  └─────────┘  └─────────┘           │
└─────────────────────────────────────┘
                  ↓
┌─────────────────────────────────────┐
│          数据服务层                  │
│  ┌─────────┐  ┌─────────┐           │
│  │ 业务API │  │ 数据API │           │
│  └─────────┘  └─────────┘           │
└─────────────────────────────────────┘
                  ↓
┌─────────────────────────────────────┐
│          数据存储层                  │
│  ┌─────────┐  ┌─────────┐           │
│  │ 业务库  │  │ 文件库  │           │
│  └─────────┘  └─────────┘           │
└─────────────────────────────────────┘
```
````

---

### 2. 流程图 (flowchart)

用于展示业务流程、操作步骤、决策逻辑。

**示例 1：简单流程**

````markdown
```ascii:flowchart
步骤1 → 步骤2 → 步骤3
  ↓       ↓       ↓
 结果1   结果2   结果3
```
````

**示例 2：会员兑换流程**

````markdown
```ascii:flowchart
浏览商城 → 选择商品 → 立即兑换
                     ↓
                 确认订单
                     ↓
                 检查积分
               ↙        ↘
            余额不足    余额充足
               ↓           ↓
            提示充值    提交订单
                          ↓
                      兑换成功
```
````

---

### 3. UI 界面图 (ui)

用于展示界面布局、组件设计、交互元素。

**注意**：UI 类型输出为 HTML/CSS，不是 SVG。

**示例 1：简单界面**

````markdown
```ascii:ui
┌────────────────────────────────────────┐
│       我的积分                         │
│        1,000  积分                     │
│  [去商城兑换]  [查看明细]              │
└────────────────────────────────────────┘
```
````

**示例 2：复杂界面**

````markdown
```ascii:ui
┌─────────────────────────────────────────────┐
│  会员中心                    [退出] [设置]  │
├─────────────────────────────────────────────┤
│                                             │
│  欢迎您，张三                               │
│  积分余额：1,000                           │
│  会员等级：黄金会员                         │
│                                             │
│  ┌────────┐  ┌────────┐  ┌────────┐       │
│  │积分商城│  │我的订单│  │个人信息│       │
│  └────────┘  └────────┘  └────────┘       │
│                                             │
└─────────────────────────────────────────────┘
```
````

---

### 4. 时间线图 (timeline)

用于展示项目进度、实施计划、甘特图。

**示例 1：简单时间线**

````markdown
```ascii:timeline
Week 1    Week 2    Week 3
│         │         │
│ 需求     │ 开发    │ 上线
└─────────┴─────────┘
```
````

**示例 2：甘特图**

````markdown
```ascii:timeline
项目阶段     Week 1   Week 2   Week 3   Week 4   Week 5
           ──────────────────────────────────────────
需求分析     ████████
系统设计              ████████
功能开发                       ██████████████████
测试验收                                          ████████
上线部署                                                  ████
```
````

---

### 5. 通用图 (diagram)

当图形不属于上述 4 种类型时，使用 `diagram` 作为通用类型。

**示例 1：层级关系**

````markdown
```ascii:diagram
┌─────────────────┐     ┌──────────┐     ┌──────────┐
│   层级1         │ ──→ │   层级2  │ ──→ │   层级3  │
└─────────────────┘     └──────────┘     └──────────┘
```
````

**示例 2：并列关系**

````markdown
```ascii:diagram
      ┌──────────────┐
      │   核心系统    │
      └──────────────┘
     ↙        ↘        ↘
┌────────┐  ┌────────┐  ┌────────┐
│ 模块A  │  │ 模块B  │  │ 模块C  │
└────────┘  └────────┘  └────────┘
```
````

---

## 检查方法

### 自动检查

使用检查脚本自动验证：

```bash
python3 converting-markdown/scripts/check_ascii_blocks.py document.md
```

### 手动检查

在文档中搜索所有的 ` ``` ` 代码块，确认每个包含方框/箭头的代码块都以 ` ```ascii: ` 开头。

---

## 常见错误

### 错误 1：只标注 `ascii` 缺少类型

````markdown
❌ 错误：
```ascii
┌────────┐
│ 系统   │
└────────┘
```
````

**问题**：标注了 `ascii` 但缺少具体类型

**正确做法**：使用 ` ```ascii:architecture ` `

---

### 错误 2：UI 图使用 `ascii` 而非 `ascii:ui`

````markdown
❌ 错误：
```ascii
┌────────┐
│ 按钮   │
└────────┘
```
````

**问题**：UI 应该用 `ascii:ui`，这样 converting-markdown 会生成 HTML/CSS

**正确做法**：使用 ` ```ascii:ui ` `

---

### 错误 3：流程图使用了 `architecture`

````markdown
❌ 错误：
```ascii:architecture
步骤1 → 步骤2 → 步骤3
```
````

**问题**：流程图应该用 `flowchart`，不是 `architecture`

**正确做法**：使用 ` ```ascii:flowchart ` `
